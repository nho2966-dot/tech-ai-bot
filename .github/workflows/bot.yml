name: tech-elite-pro-bot

on:
  schedule:
    - cron: '30 10 * * *' # 1:30 PM KSA
    - cron: '0 18 * * *'  # 9:00 PM KSA
    - cron: '45 20 * * *' # 11:45 PM KSA
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build-and-run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - run: pip install tweepy feedparser google-genai python-dotenv openai
      - name: Run Bot
        env:
          X_BEARER_TOKEN: ${{ secrets.X_BEARER_TOKEN }}
          X_API_KEY: ${{ secrets.X_API_KEY }}
          X_API_SECRET: ${{ secrets.X_API_SECRET }}
          X_ACCESS_TOKEN: ${{ secrets.X_ACCESS_TOKEN }}
          X_ACCESS_SECRET: ${{ secrets.X_ACCESS_SECRET }}
          GEMINI_KEY: ${{ secrets.GEMINI_KEY }}
          OPENROUTER_API_KEY: ${{ secrets.OPENROUTER_API_KEY }}
        run: python main.py
      - name: Save Changes
        run: |
          git config --local user.email "bot@github.com"
          git config --local user.name "TechBot"
          git add news.db
          git commit -m "üíæ ÿ≠ŸÅÿ∏ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÜÿ¥ÿ± ŸàÿßŸÑÿ±ÿØŸàÿØ [skip ci]" || exit 0
          git push
